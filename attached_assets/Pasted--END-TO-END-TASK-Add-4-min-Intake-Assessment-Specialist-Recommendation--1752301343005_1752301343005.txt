ğŸš€  END-TO-END TASK: Add 4-min Intake Assessment & Specialist Recommendation
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0. Safety
   â€¢ Create git branch intake-assessment.

1. DATA  âœ  create /data/intake_questions.json with this exact array:
[
  {"id":"reason","q":"So, what brings you here? (select all that apply)","type":"multi","options":["Just curious","Planning for babies in the future","Experiencing symptoms","Actively trying to conceive","Thinking about egg freezing or IVF","Perimenopause concerns","Menopause advice"],"required":true},
  {"id":"dob","q":"Whatâ€™s your date of birth?","type":"date","required":true},
  {"id":"sex_at_birth","q":"Sex assigned at birth","type":"single","options":["Female","Male","Other"],"required":true},
  {"id":"identify_female","q":"Do you currently identify as female?","type":"single","options":["Yes","No","Prefer not to say"]},
  {"id":"sexual_orientation","q":"Sexual orientation (select all that apply)","type":"multi","options":["Prefer not to say","Heterosexual","Lesbian","Bisexual","Asexual","Demisexual","Pansexual","Fluid","Other"]},
  {"id":"ethnicity_group","q":"Which ethnicity group best describes you?","type":"single","options":["Asian / Asian British","Black / Black British","Indigenous / First Nations","Middle Eastern","Mixed or Other","White"]},
  {"id":"ethnicity_specific","q":"Specific ethnicity (optional)","type":"text"},
  {"id":"diagnoses","q":"Have you been diagnosed with any of the following reproductive-health conditions?","type":"multi","options":["None","Adenomyosis","Ashermanâ€™s syndrome","Endometriosis","Fibroids","PCOS","Premature ovarian insufficiency (POI)","Perimenopause / Menopause","Other"]},
  {"id":"symptoms","q":"Which symptoms are you experiencing? (select all)","type":"multi","options":["None","Acne","Pelvic pain","Painful periods","Hot flushes","Hair loss","Low mood / anxiety","Night sweats","Vaginal dryness","Other"]},
  {"id":"symptom_timing","q":"When do you experience these symptoms?","type":"single","options":["Before period","During period","After period","No pattern"],"skipIfNoSymptoms":true},
  {"id":"stress_level","q":"How have you been feeling recently?","type":"single","options":["Calm / relaxed","Neutral","Somewhat stressed","Completely stressed / overwhelmed"]},
  {"id":"period_start","q":"When did your most recent period start?","type":"dateOrText","placeholder":"DD/MM/YYYY or select 'I donâ€™t remember'","allowFreeText":["I donâ€™t remember","I have never had a period"]},
  {"id":"cycle_regular","q":"How regular is your cycle?","type":"single","options":["Regular","Irregular","Not currently getting periods","Iâ€™ve never had a period"]},
  {"id":"contraception","q":"Current contraception (select all that apply)","type":"multi","options":["None","Combined pill","Progesterone-only pill","IUD / Coil","Implant","Condoms","Natural methods","Other"]},
  {"id":"medications","q":"What (other) medication(s) are you currently taking?","type":"multi","options":["None","HRT","Thyroid medication","SSRIs","Pain relief","Other"]},
  {"id":"ever_pregnant","q":"Have you ever been pregnant?","type":"single","options":["Yes â€“ I have children","Yes â€“ but no children","No"]},
  {"id":"breastfeeding","q":"Are you currently breastfeeding?","type":"single","options":["Yes","No"],"conditionalOn":{"id":"ever_pregnant","value":["Yes â€“ I have children","Yes â€“ but no children"]}},
  {"id":"sti_history","q":"Have you ever been treated for an STI?","type":"multi","options":["None / I donâ€™t know","Chlamydia","Genital herpes","HPV","Gonorrhoea","Syphilis","Other"]},
  {"id":"height","q":"Height (cm)","type":"number"},
  {"id":"weight","q":"Weight (kg)","type":"number"},
  {"id":"lifestyle_exercise","q":"How often do you exercise?","type":"single","options":["Never","1â€“2Ã— / week","3â€“6Ã— / week","Every day","More than once a day"]},
  {"id":"appointment_goal","q":"Whatâ€™s the #1 thing you hope to get out of this appointment?","type":"single","options":["More information about my hormones","A diagnosis","Answers about fertility","Help with symptoms"]}
]

2. RECOMMENDATION ENGINE âœ /utils/recommendationEngine.ts
function getSpecialty(answers):
  â€¢ If reason includes 'Menopause' â†’ 'Menopause Specialist'
  â€¢ If reason includes 'Perimenopause' â†’ 'Perimenopause Specialist'
  â€¢ If reason matches /(Fertility|conceive)/i â†’ 'Fertility Specialist'
  â€¢ If reason includes 'PCOS' OR diagnoses includes 'PCOS' â†’ 'Endocrine Gynaecologist'
  â€¢ If reason includes 'Experiencing symptoms' AND (diagnoses has 'Endometriosis' OR symptoms has pelvic/pain strings) â†’ 'Endometriosis Specialist'
  â€¢ else â†’ 'Womenâ€™s Health GP'

3. BACKEND:
â€¢ POST /api/intake
   â€“ Accept { answers }
   â€“ Save (userId or guestId cookie) in Intake table
   â€“ const specialty = getSpecialty(answers)
   â€“ return { intakeId, specialty }
â€¢ GET /api/doctors?specialty=
   â€“ If ?specialty passed, case-insensitive filter; else all
â€¢ Seed doctors:
   If Doctors count == 0 insert:
     Dr Emma Repro  | Fertility Specialist
     Dr Grace Meno  | Menopause Specialist
     Dr Sarah Endo  | Endometriosis Specialist
     Dr Olivia GP   | Womenâ€™s Health GP
   (simple avatars placeholder links)

4. FRONT-END:
a. Intake wizard
   â€¢ Route            /intake
   â€¢ Component        /client/src/IntakeWizard.jsx
   â€¢ Loads questions JSON, 4-step progress bar, required validation
   â€¢ On submit -> navigate to /loading with answers in location.state
b. Loading screen
   â€¢ Route            /loading
   â€¢ Component        LoadingTailor.jsx
   â€¢ Full-screen hero background + text â€œHold tight while we tailor your consultâ€
   â€¢ Simulated 3-sec progress bar; meanwhile POST answers to /api/intake
   â€¢ After resolve, redirect to /recommendation?specialty=<slug>
c. Recommendation page
   â€¢ Route            /recommendation
   â€¢ Component        Recommendation.jsx
   â€¢ Fetch /api/doctors?specialty=xyz
   â€¢ Heading â€œBased on your answers, we recommend a {{specialty}}â€
   â€¢ Display DoctorCard list (reuse existing component)
   â€¢ If list empty show fallback all doctors
d. Landing hero
   â€¢ Add secondary button â€œStart 4-min Assessmentâ€ linking to /intake (mobile & desktop)

5. DOCTOR VIEW (bonus)
   â€¢ In doctor booking detail, show a collapsible â€œPatient Intake Summaryâ€ with JSON answers prettified (optional).

6. QA script
   â€¢ Run site
   â€¢ Complete /intake with â€œMenopause symptomsâ€ -> loading -> recommendation -> Dr Grace Meno card only
   â€¢ Book consult, pay (Stripe test), booking succeeds
   â€¢ Provide summary PASS/FAIL

Leave all other routes, DB models, payments unchanged.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
